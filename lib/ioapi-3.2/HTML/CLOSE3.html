
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<!-- "$Id: CLOSE3.html 1 2017-06-10 18:05:20Z coats $" -->
<META NAME="MSSmartTagsPreventParsing" CONTENT="TRUE"> 
<TITLE> CLOSE3() and close3c() </TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFFF" 
      TOPMARGIN="15" 
      MARGINHEIGHT="15" 
      LEFTMARGIN="15" 
      MARGINWIDTH="15">
<H1>    CLOSE3() and close3c() </H1>

<H2> Fortran version: </H2>
<PRE>
    LOGICAL FUNCTION  CLOSE3( FNAME )
        CHARACTER*(*), INTENT(IN   ) :: FNAME   !  file name for query
</PRE>

<H2> C version: </H2>  <P>

<PRE>
    int close3c( const char * fname ) ;
</PRE>

    <CODE>close3c()</CODE> is a C wrapper calling the Fortran
    <CODE>CLOSE3() </CODE>
    <P>

<H2> See also: </H2>

    <BLOCKQUOTE>
    <A HREF = "SHUT3.html">SHUT3()</A>, which flushes and closes
    all I/O&nbsp;API files currently open, and <BR>
    <A HREF = "M3EXIT.html">M3EXIT()</A>, which is a program-shutdown
    wrapper around SHUT3().
    </BLOCKQUOTE>
    <P> 

<H2> Summary: </H2>

    <BLOCKQUOTE>

    <STRONG><EM>
    Using <CODE>CLOSE3()</CODE> from within Models-3 related modeling
    code is strictly forbidden by order of Joan&nbsp;Novak, head EPA
    ORD, and Ed&nbsp;Bilicki, head MCNC Environmental Programs, 1995.
    </EM></STRONG>
    <P> 

    Was added at the insistence of Todd Plessel, EPA Vis Lab, over the
    objections of the Models-3 Systems Architect, for use in
    visualizations programs only. <STRONG>Should not be used from
    within Models-3 science modules,  since it will cause modularity
    violations with respect to what files other modules think have been
    opened.  (There is no way in the system to keep track of how many
    modules are in fact using a file, and close it only after
    <EM>all</EM> of them have issued a <CODE>CLOSE3()</CODE> call for
    it.)
    </STRONG>
    <P> 

    Flushes the file with file with 
    <A HREF = "LOGICALS.html"> logical name </A> FNAME to
    disk, then closes it.   Returns .TRUE. or 1 if it succeeds 
    at closing the file, or .FALSE. or 0 otherwise.
    <P> 

    If FNAME is invalid, writes an error message
    indicating the nature of the problem to the log and returns 
    a FALSE (or 0).
    <P> 
    </BLOCKQUOTE>

<H2> Preconditions: </H2>

    <BLOCKQUOTE>
    <CODE><A HREF = "M3UTILIO.html">USE M3UTILIO</A></CODE> or
    <A HREF = "INCLUDE.html#iodecl"> 
    <CODE>INCLUDE 'IODECL3.EXT'</CODE> </A> 
    for Fortran, or <BR>
    <CODE>#include &quot;iodecl3.h&quot;</CODE> for C.
    <P> 

    FNAME must have length at most 16.
    <P> 
    
    JDATE and JTIME must be expressed in terms of Models-3 
    date and time conventions.
    <P> 
    
    FNAME must already have been opened by 
    <A HREF = "OPEN3.html"> OPEN3() or open3c() </A> 
    and the I/O API must have been initialized  with 
    <A HREF = "INIT3.html"> INIT3() or init3c() </A> ).
    </BLOCKQUOTE>

<H2> Fortran Usage: </H2>

<PRE>
    ...
    USE M3UTILIO
    ...
    ...
    IF ( CLOSE3( 'MYFILE' ) ) THEN
        !!  MYFILE successfully flushed to disk, and closed.
        ...
    END IF
    ...
</PRE><P> 

        
<H2> C Usage: </H2>
<PRE>
    ...
    #include "iodecl3.h"
    ...
    if ( close3c( "MYFILE" ) )
        {
            /*  MYFILE successfully flushed to disk, and closed.  */
        ...
        }
    ...
</PRE><P> 


<HR>

<A HREF = "CHECK3.html" >
Previous:  <STRONG>CHECK3</STRONG>
</A><P> 

<A HREF = "DDTVAR3.html" >
Next:  <STRONG>DDTVAR3</STRONG>
</A><P> 

<A HREF = "AA.html#ioapi"> 
Up: <STRONG>Public I/O Routines </STRONG> 
</A><P>

<A HREF = "AA.html"> 
To: <STRONG>Models-3/EDSS I/O API:   The Help Pages</STRONG> 
</A><P>

        
</BODY>
</HTML>

